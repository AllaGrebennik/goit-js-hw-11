{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst fetchBtn = document.querySelector(\".search-btn\");\nconst qSearch = document.querySelector(\".input-text\");\nconst gallery = document.querySelector(\".gallery\");\nconst spinner = document.querySelector(\".spinner\");\n\nlet searchParams = {\n    key: \"41702324-4ff2c897c89b5acf667452ea5\",\n    q: \"\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n};\n    \nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n        \nfetchBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    spinner.classList.add(\"loader\");\n    fetchFoto()\n        .then((fotos) => renderFotos(fotos))\n        .catch((error) => iziToast.error({ position: 'topRight', title: \"Error\", message: `${error}` }))\n        .finally(() => spinner.classList.remove(\"loader\"));\n});\n\nfunction fetchFoto() {\n    searchParams.q = qSearch.value;\n    const searchParamsCurrent = new URLSearchParams(searchParams);\n    return fetch(`http://pixabay.com/api?${searchParamsCurrent}`).then(\n        (response) => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            };\n            return response.json();\n        }\n    );\n};\n\nfunction renderFotos(fotos) {\n    if (fotos.hits.length === 0) {\n         iziToast.error({\n            position: 'topRight',\n            maxWidth: 350,\n            message: \"Sorry, there are no images matching \\n your search query. Please try again!\"\n        })\n    }\n    else {\n        const markup = fotos.hits.map(({\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads\n        }) => `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"/>\n                </a>\n                <div class=\"info-item\">\n                    <div class=\"info-image\">\n                        <h3 class=\"info-key\">Likes</h3>\n                        <p class=\"info-value\">${likes}</p>\n                    </div>\n                    <div class=\"info-image\">\n                        <h3 class=\"info-key\">Views</h3>\n                        <p class=\"info-value\">${views}</p>\n                    </div>\n                    <div class=\"info-image\">\n                        <h3 class=\"info-key\">Comments</h3>\n                        <p class=\"info-value\">${comments}</p>\n                    </div>\n                    <div class=\"info-image\">\n                        <h3 class=\"info-key\">Downloads</h3>\n                        <p class=\"info-value\">${downloads}</p>\n                    </div>\n                </div>\n                \n            </li>`).join(\"\");\n        gallery.innerHTML = markup;\n        lightbox.refresh();\n    }       \n}\n"],"names":["fetchBtn","qSearch","gallery","spinner","searchParams","lightbox","SimpleLightbox","e","fetchFoto","fotos","renderFotos","error","iziToast","searchParamsCurrent","response","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAOA,MAAMA,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAe,CACf,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEDN,EAAS,iBAAiB,QAAUO,GAAM,CACtCA,EAAE,eAAc,EAChBL,EAAQ,UAAY,GACpBC,EAAQ,UAAU,IAAI,QAAQ,EAC9BK,EAAW,EACN,KAAMC,GAAUC,EAAYD,CAAK,CAAC,EAClC,MAAOE,GAAUC,EAAS,MAAM,CAAE,SAAU,WAAY,MAAO,QAAS,QAAS,GAAGD,GAAS,CAAA,CAAC,EAC9F,QAAQ,IAAMR,EAAQ,UAAU,OAAO,QAAQ,CAAC,CACzD,CAAC,EAED,SAASK,GAAY,CACjBJ,EAAa,EAAIH,EAAQ,MACzB,MAAMY,EAAsB,IAAI,gBAAgBT,CAAY,EAC5D,OAAO,MAAM,0BAA0BS,GAAqB,EAAE,KACzDC,GAAa,CACV,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MACnB,CACT,CACA,CAEA,SAASJ,EAAYD,EAAO,CACxB,GAAIA,EAAM,KAAK,SAAW,EACrBG,EAAS,MAAM,CACZ,SAAU,WACV,SAAU,IACV,QAAS;AAAA,sCACrB,CAAS,MAEA,CACD,MAAMG,EAASN,EAAM,KAAK,IAAI,CAAC,CAC3B,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IAAc;AAAA;AAAA,gDAEkCL;AAAA;AAAA;AAAA,2BAGrBD;AAAA,2BACAE;AAAA;AAAA;AAAA;AAAA;AAAA,gDAKqBC;AAAA;AAAA;AAAA;AAAA,gDAIAC;AAAA;AAAA;AAAA;AAAA,gDAIAC;AAAA;AAAA;AAAA;AAAA,gDAIAC;AAAA;AAAA;AAAA;AAAA,kBAI9B,EAAE,KAAK,EAAE,EACnBpB,EAAQ,UAAYa,EACpBV,EAAS,QAAO,CACnB,CACL"}